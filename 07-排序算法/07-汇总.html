<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 1. 冒泡排序
        function bubbleSort(arr){
            if(!Array.isArray(arr) || arr.length <= 1) return
            for(let j=arr.length-1; j>0; j--){
                for(let i=0; i<j; i++){
                    if(arr[i] > arr[i+1]){
                        [arr[i],arr[i+1]] = [arr[i+1],arr[i]]
                    }
                }
            }
        }

        // 1.1 改进的冒泡排序
        function betterBubbleSort(arr){
            if(!Array.isArray(arr) || arr.length <= 1) return
            let lastIndex = arr.length - 1
            while(lastIndex > 0){
                let flag = true , k = lastIndex
                for(let i=0; i<k; i++){
                    if(arr[i] > arr[i+1]){
                        [arr[i],arr[i+1]] = [arr[i+1],arr[i]]
                        flag = false
                        lastIndex = k
                    }
                }
                if(flag) break
            }
        }

        // 2.选择排序
        function selectSort(arr){
            if(!Array.isArray(arr) || arr.length <= 1) return   
            for(let i=0; i<arr.length; i++){
                let minIndex = i
                for(let j=minIndex+1; j<arr.length; j++){
                    if(arr[minIndex] > arr[j]){
                        minIndex = j
                    }
                }
                [arr[minIndex] , arr[i]] = [arr[i] , arr[minIndex]]
            }
            
        }

        // 3.插入排序
        function insertSort(arr){
            if(!Array.isArray(arr) || arr.length <= 1) return
            for(let i=1; i<arr.length; i++){
                let j = i , tmp = arr[i]
                while(tmp < arr[j-1] && j - 1 >= 0){
                    arr[j] = arr[j-1]
                    j--
                }
                arr[j] = tmp
            }
        }

        // 4.希尔排序
        function shellSort(arr){
            if(!Array.isArray(arr) || arr.length <= 1) return
            let gap = Math.floor(arr.length / 2)
            while(gap > 0){
                for(let i=gap; i<arr.length; i++){
                    let j = i , tmp = arr[i]
                    while(j - gap >= 0 && tmp < arr[j-gap]){
                        arr[j] = arr[j-gap]
                        j = j - gap
                    }
                    arr[j] = tmp 
                }
                gap = Math.floor(gap / 2)
            }
        }

        // 5.归并排序
        function mergeSort(arr){
            if(!Array.isArray(arr) || arr.length == 0) return
            if(arr.length == 1) return arr
            let minIndex = Math.floor(arr.length / 2),
                leftArr = arr.slice(0,minIndex),
                rightArr = arr.slice(minIndex,arr.length)
            return merge(mergeSort(leftArr),mergeSort(rightArr))
        }
        function merge(leftArr,rightArr){
            let i = 0 , j = 0 , result = []
            while(i < leftArr.length && j < rightArr.length){
                if(leftArr[i] < rightArr[j]){
                    result.push(leftArr[i])
                    i++
                }else{
                    result.push(rightArr[j])
                    j++
                }
            }
            
            while(j < rightArr.length){
                result.push(rightArr[j])
                j++
            }
            
            while(i < leftArr.length){
                result.push(leftArr[i])
                i++
            }
            
            return result
        }

        // 6.快速排序
        function quickSort(arr){
            sort(0,arr.length-1)
        }   
        function sort(start,end){
            if(end <= start) return
            let position = getPosition(start,end),
                i = start,
                j = end - 1
            while(i<j){
                while(arr[++i] < position){}
                while(arr[--j] > position){}
                if(i < j){
                    [arr[i],arr[j]] = [arr[j],arr[i]]
                }else{
                    break
                }
            }
            [arr[i],arr[end-1]] = [arr[end-1],arr[i]]
            sort(start,i-1)
            sort(i+1,end)
        }
        function getPosition(start,end){
            let minIndex = Math.floor((start+end) / 2)
            if(arr[start] > arr[minIndex]){
                [arr[start],arr[minIndex]] = [arr[minIndex],arr[start]]
            }
            if(arr[minIndex] > arr[end]){
                [arr[minIndex],arr[end]] = [arr[end],arr[minIndex]]
            }
            if(arr[start] > arr[end]){
                [arr[start],arr[end]] = [arr[end],arr[start]]
            }
            [arr[minIndex],arr[end-1]] = [arr[end-1],arr[minIndex]]
            return arr[end-1]
        }
        let arr = [24,3,6,10,9,8,56,100]
        //bubbleSort(arr)
        //betterBubbleSort(arr)
        //selectSort(arr)
        //insertSort(arr)
        //shellSort(arr)
        // alert(mergeSort(arr))
        quickSort(arr)
        alert(arr)
    </script>
</body>
</html>